<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core">

    <head>
        <title>Ajouter le lieu</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"/>
    </head>
    
    <body class="container mt-5">
        <h1 class="text-center">Ajouter un lieu</h1>

        <h:form class="card p-4 shadow">
            <h:inputHidden value="#{lieuBean.indexModification}" />  <!-- Stocke l'index du lieu à modifier -->

            <div class="mb-3">
                <label class="form-label">Entrez le nom :</label>
                <h:inputText value="#{lieuBean.nom}" class="form-control" required="true"/>
            </div>

            <div class="mb-3">
                <label class="form-label">Entrez la description :</label>
                <h:inputTextarea value="#{lieuBean.description}" class="form-control" required="true"/>
            </div>

            <div class="mb-3">
                <label class="form-label">Entrez la latitude :</label>
                <h:inputText value="#{lieuBean.latitude}" class="form-control" required="true"/>
            </div>

            <div class="mb-3">
                <label class="form-label">Entrez la longitude :</label>
                <h:inputText value="#{lieuBean.longitude}" class="form-control" required="true"/>
            </div>

            <h:commandButton value="Ajouter" action="#{lieuBean.ajouterLieu}" rendered="#{lieuBean.indexModification == -1}" styleClass="btn btn-success"/>
            <h:commandButton value="Modifier" action="#{lieuBean.modifierLieu}" rendered="#{lieuBean.indexModification != -1}" styleClass="btn btn-warning"/>

        </h:form>

        <h2 class="mt-5 text-center">Tableau contenant la liste des lieux ajoutés</h2>

        <h:dataTable value="#{lieuBean.lieux}" var="lieu" class="table table-bordered table-hover mt-3 shadow">
            <h:column>
                <f:facet name="header">Nom</f:facet>
                #{lieu.nom}
            </h:column>

            <h:column>
                <f:facet name="header">Description</f:facet>
                #{lieu.description}
            </h:column>

            <h:column>
                <f:facet name="header">Latitude</f:facet>
                #{lieu.latitude}
            </h:column>

            <h:column>
                <f:facet name="header">Longitude</f:facet>
                #{lieu.longitude}
            </h:column>

            <h:column>
                <f:facet name="header">Actions</f:facet>
                <h:form>
                    <h:commandButton value="Modifier" action="#{lieuBean.preparerModification(lieu)}" styleClass="btn btn-warning btn-sm me-2"/>
                    <h:commandButton value="Supprimer" action="#{lieuBean.supprimerLieu(lieu)}" styleClass="btn btn-danger btn-sm"/>
                </h:form>
            </h:column>
        </h:dataTable>

    </body>
</html>
